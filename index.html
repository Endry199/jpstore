<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JP STORE - Recarga Diamantes y Saldo en tus Juegos Favoritos</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preload" href="images/malok_logo.png" as="image">
    <link rel="preload" href="images/flag_ve.png" as="image">
    <link rel="preload" href="images/flag_us.png" as="image">
    <link rel="preload" href="images/flag_co.png" as="image">
    <link rel="preload" href="images/freefire_banner.jpg" as="image">
    <link rel="preload" href="images/tiktok_banner.jpg" as="image">
    <link rel="preload" href="images/blooqstrike_banner.jpg" as="image">
    <link rel="preload" href="images/roblox_banner.jpg" as="image">
    <link rel="preload" href="images/netflix_banner.jpg" as="image">
    <link rel="preload" href="images/codm_banner.jpg" as="image">
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">

<style>
    /* Estilos idénticos al primer carrusel con ajustes de colores verdes/oscuros */
    .hero {
        padding: 0;
        margin-bottom: 30px; 
        position: relative;
        overflow: hidden; 
        background: none; 
        box-shadow: none; 
        border: none;
    }
    
    .hero h1, .hero p {
        display: none; 
    }
    
    .carousel-container {
        max-width: 1200px; 
        margin: 0 auto;
        position: relative;
        overflow: hidden; 
        border-radius: 15px;
        /* Colores verdes/oscuros del segundo diseño */
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4), 0 0 25px rgba(16, 86, 0, 0.3);
    }
    
    .carousel-track {
        display: flex;
        transition: transform 0.5s ease-in-out;
    }
    
    .carousel-slide {
        min-width: 100%;
        height: 400px; /* Altura deseada en desktop/tablet */
        background-position: center;
        background-repeat: no-repeat;
    }
    
    /* Aplicamos 'cover' solo para pantallas grandes (desktop) */
    @media (min-width: 769px) { 
        .carousel-slide {
            background-size: cover;
        }
    }
    
    /* URLs de las imágenes - Ajusta según tus banners */
    #slide-1 { background-image: url('images/banner1.jpg'); }
    #slide-2 { background-image: url('images/banner2.jpg'); }
    #slide-3 { background-image: url('images/banner1.jpg'); }
    #slide-4 { background-image: url('images/banner2.jpg'); }
    
    .carousel-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        /* Color verde del segundo diseño */
        background-color: rgba(38, 182, 55, 0.7);
        color: white;
        border: none;
        padding: 15px;
        cursor: pointer;
        z-index: 10;
        font-size: 1.5em;
        border-radius: 50%;
        transition: background-color 0.3s;
    }
    
    .carousel-btn:hover { 
        background-color: rgb(16, 86, 0); /* Verde oscuro al hover */
    }
    
    .prev-btn { left: 10px; }
    .next-btn { right: 10px; }
    
    .carousel-dots {
        position: absolute;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 8px;
        z-index: 10;
    }
    
    .dot {
        height: 10px;
        width: 10px;
        background-color: rgba(255, 255, 255, 0.5);
        border-radius: 50%;
        display: inline-block;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.3s;
    }
    
    .dot.active {
        /* Color verde activo del segundo diseño */
        background-color: rgb(16, 86, 0);
        transform: scale(1.2);
    }

    /* Media Queries para Teléfonos */
    @media (max-width: 768px) { 
        .carousel-slide { 
            height: 220px; 
            background-size: 100% 100%; 
        } 
    }
    
    @media (max-width: 480px) { 
        .carousel-slide { 
            height: 160px; 
            background-size: 100% 100%; 
        } 
    }
</style>
</head>
<body>

<header>
    <div class="header-left">
        <a href="index.html" class="logo-link">
            <img src="images/malok_logo.png" alt="JP STORE Logo" class="logo-img">
        </a>
    </div>
    <div class="header-right">
        
        <div class="wallet-container" id="wallet-container" style="display:none;"> 
            <div class="wallet-display">
                <i class="fas fa-wallet"></i>
                <span id="virtual-balance">$. --.--</span>
            </div>
            <a href="rechargedwallet.html" class="recharge-btn" title="Recargar Saldo">
                <i class="fas fa-plus"></i>
            </a>
        </div>
        <div class="search-bar">
            <input type="text" placeholder="Buscar juego...">
            <i class="fas fa-search"></i>
        </div>

        <div class="custom-currency-selector" id="custom-currency-selector">
            <div class="selected-currency" id="selected-currency">
                <img src="images/flag_ve.png" alt="Venezuela Flag"> <span>Bs. (VES)</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="currency-options" id="currency-options">
                <div class="option" data-value="VES">
                    <img src="images/flag_ve.png" alt="Venezuela Flag"> <span>Bs. (VES)</span>
                </div>
                <div class="option" data-value="USD">
                    <img src="images/flag_us.png" alt="USA Flag"> <span>$ (USD)</span>
                </div>
                <div class="option" data-value="JPUSD"> 
                    <img src="images/favicon.ico" alt="JP USD Flag"> <span>$ (JPUSD)</span>
                </div>
                <div class="option" data-value="COP">
                    <img src="images/flag_co.png" alt="Colombia Flag"> <span>$ (COP)</span>
                </div>
            </div>
        </div>

        <div class="cart-icon" id="cart-icon">
            <i class="fas fa-shopping-cart"></i>
            <span class="cart-count" id="cart-count">0</span>
        </div>

        <div class="auth-dropdown" id="auth-dropdown">
            <button class="auth-btn" id="toggle-login-btn">
                <i class="fas fa-user-circle"></i>
                <img src="images/default_user.png" alt="Usuario" class="auth-user-picture" id="auth-user-picture" style="display:none;">
            </button>
            
            <div class="dropdown-content">
                <a href="#" class="auth-display-name" id="auth-display-name">Iniciar Sesión</a>
                <hr>
                
                <div id="google-login-btn" style="display: block;">
                    </div>
                
                <button id="logout-btn" class="logout-btn" style="display:none;">
                    <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
                </button>
            </div>
        </div>
    </div>
</header>

    <main class="home-main" style="margin-top: 115px;">
        <section class="hero">
            <!-- Carrusel idéntico al primero -->
            <div class="carousel-container">
                <div class="carousel-track" id="carousel-track">
                    <div class="carousel-slide" id="slide-1"></div>
                    <div class="carousel-slide" id="slide-2"></div>
                    <div class="carousel-slide" id="slide-3"></div>
                    <div class="carousel-slide" id="slide-4"></div>
                </div>
                <button class="carousel-btn prev-btn" aria-label="Anterior"><i class="fas fa-chevron-left"></i></button>
                <button class="carousel-btn next-btn" aria-label="Siguiente"><i class="fas fa-chevron-right"></i></button>
                <div class="carousel-dots" id="carousel-dots">
                    <span class="dot active"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
            </div>
        </section>

        <section style="padding: 20px;">
            <h2>Juegos Disponibles</h2>
            <p class="small-text">Haz clic en tu juego para comenzar la recarga.</p>
            <div class="product-grid" id="product-grid">
            </div>
        </section>
    </main>
 
    <footer>
        <div class="footer-content">
            <p>&copy; 2026 JP STORE. Todos los derechos reservados.</p>
            <div class="footer-links">
                <a href="privacy.html">Políticas de Privacidad</a>
                <a href="terms.html">Términos de Servicio</a>
            </div>
            <a href="https://wa.me/584143187185" target="_blank" class="whatsapp-link">
                <i class="fab fa-whatsapp"></i> Contáctanos por WhatsApp
            </a>
        </div>
    </footer>

    <div class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header">
            <h2>Tu Carrito</h2>
            <button class="close-btn" id="close-cart-btn"><i class="fas fa-times"></i></button>
        </div>
        <div class="cart-items-wrapper">
            <div class="cart-items" id="cart-items">
                </div>
        </div>
        <div class="cart-footer">
            <div class="cart-total-info">
                <span>Total:</span>
                <span id="cart-total">$0.00</span>
            </div>
            <button class="btn-primary checkout-btn" id="checkout-btn" disabled>Proceder al Pago</button>
        </div>
    </div>
    
    <script src="script.js"></script>
    <script src="load-products.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const track = document.getElementById('carousel-track');
            const slides = Array.from(document.querySelectorAll('.carousel-slide'));
            const nextBtn = document.querySelector('.next-btn');
            const prevBtn = document.querySelector('.prev-btn');
            const dotsContainer = document.getElementById('carousel-dots');
            const dots = Array.from(document.querySelectorAll('.dot'));
            
            if (!track || slides.length === 0) return; // Salir si los elementos no existen

            let currentSlide = 0;
            
            // Función para obtener el ancho de un slide de manera dinámica
            const getSlideWidth = () => slides[0].clientWidth;

            // Función para mover el carrusel
            const moveToSlide = (index) => {
                const slideWidth = getSlideWidth();
                track.style.transform = `translateX(-${slideWidth * index}px)`;
                currentSlide = index;
                updateDots();
            };

            // Función para actualizar los indicadores (dots)
            const updateDots = () => {
                dots.forEach((dot, index) => {
                    if (index === currentSlide) {
                        dot.classList.add('active');
                    } else {
                        dot.classList.remove('active');
                    }
                });
            };

            // Event Listeners para botones
            nextBtn.addEventListener('click', () => {
                let nextIndex = (currentSlide + 1) % slides.length;
                moveToSlide(nextIndex);
            });

            prevBtn.addEventListener('click', () => {
                // Asegura un índice positivo usando (x + n) % n
                let prevIndex = (currentSlide - 1 + slides.length) % slides.length;
                moveToSlide(prevIndex);
            });

            // Event Listeners para puntos
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    moveToSlide(index);
                });
            });

            // Auto-avance (opcional)
            let autoSlideInterval = setInterval(() => {
                let nextIndex = (currentSlide + 1) % slides.length;
                moveToSlide(nextIndex);
            }, 5000); // Cambia cada 5 segundos
            
            // Pausar auto-avance al pasar el ratón o tocar
            const carouselContainer = document.querySelector('.carousel-container');
            carouselContainer.addEventListener('mouseover', () => clearInterval(autoSlideInterval));
            carouselContainer.addEventListener('mouseleave', () => {
                autoSlideInterval = setInterval(() => {
                    let nextIndex = (currentSlide + 1) % slides.length;
                    moveToSlide(nextIndex);
                }, 5000);
            });

            // Recalcular el ancho en resize (importante para responsividad)
            window.addEventListener('resize', () => {
                // Forzamos la posición inicial al redimensionar para evitar errores visuales
                moveToSlide(currentSlide);
            });

            // Inicialización
            updateDots();
            moveToSlide(0);
        });
    </script>
</body>
</html>